spring:
  config:
    import: optional:file:services/chat-service/.env[.properties]
  application:
    name: chat-service
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}  # Default to dev profile
  # Database mongo
  data:
#    mongodb:
#      host: localhost
#      port: 27017
#      database: chat-service
    # Redis Configuration
    redis:
      host: localhost
      port: 6379
      password: ''
      timeout: 60000
  cache:
    type: redis
    redis:
      time-to-live: 600000

server:
  port: 8086

# Auth Service
auth-service:
  url: http://localhost:8087

# Main Service
main-service:
  url: http://localhost:8083

# Eureka Configuration - DISABLED by default for local development
eureka:
  client:
    enabled: ${EUREKA_CLIENT_ENABLED:false}  # Disabled by default
    service-url:
      defaultZone: ${EUREKA_SERVER_URL:http://localhost:8761/eureka/}
  instance:
    prefer-ip-address: true

#elk stack
logstash:
  host: localhost
  port: 5000
# Enable Spring property resolution in Logback
#logging.config=classpath:logback-spring.xml

---
# Docker/Production Profile - Eureka ENABLED
spring:
  config:
    activate:
      on-profile: docker

# Activate ELK logging in Docker (note: file is named logback-spring-pro.xml)
logging:
  config: classpath:logback-spring-pro.xml

eureka:
  client:
    enabled: true
    service-url:
      defaultZone: http://discovery-service:8761/eureka/  # Docker DNS name
  instance:
    prefer-ip-address: true
    hostname: chat-service

# ELK Stack - Use Docker service name
logstash:
  host: logstash
  port: 5000
