<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1713px" preserveAspectRatio="none" style="width:1019px;height:1713px;background:#FEFEFE;" version="1.1" viewBox="0 0 1019 1713" width="1019px" zoomAndPan="magnify"><title>Kafka Event-Driven Architecture Flow</title><defs/><g><rect fill="#FEFEFE" height="1713" style="stroke:none;stroke-width:1;" width="1019" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="467.6504" x="274.4673" y="35.4209">Kafka Event-Driven Architecture Flow</text><g><title>Main Service</title><rect fill="#FFFFFF" height="376.8594" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="188.1719"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="267.3281" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="637.2969"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="271.3945" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="983.8906"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="246.1953" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="318.8359"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="136.6641" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="767.9609"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="140.7305" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="1114.5547"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="217.0625" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="347.9688"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="107.5313" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="797.0938"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="111.5977" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="1143.6875"/></g><g><title>Search Service</title><rect fill="#FFFFFF" height="73.3984" style="stroke:#000000;stroke-width:1;" width="10" x="728.0366" y="491.6328"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="188.1719"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="637.2969"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="983.8906"/></g><g><title>Main Service</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="67.8062" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="71" x2="71" y1="113.9063" y2="1635.0078"/></g><g><title>Kafka Broker</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="304.9058" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="308.792" x2="308.792" y1="113.9063" y2="1635.0078"/></g><g><title>Notification Service</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="520.5776" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="524.3174" x2="524.3174" y1="113.9063" y2="1635.0078"/></g><g><title>Search Service</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="729.0366" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="732.7383" x2="732.7383" y1="113.9063" y2="1635.0078"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="851.7114" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="855.335" x2="855.335" y1="113.9063" y2="1635.0078"/></g><g><title>Elasticsearch</title><rect fill="#000000" fill-opacity="0.00000" height="1521.1016" width="8" x="954.3364" y="113.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="958.0879" x2="958.0879" y1="113.9063" y2="1635.0078"/></g><g class="participant participant-head" data-participant="Main"><rect fill="#ADD8E6" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.6123" x="20" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.6123" x="27" y="102.6045">Main Service</text></g><g class="participant participant-tail" data-participant="Main"><rect fill="#ADD8E6" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.6123" x="20" y="1634.0078"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.6123" x="27" y="1654.0029">Main Service</text></g><g class="participant participant-head" data-participant="Kafka"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.2275" x="256.792" y="66.3125"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.2275" x="263.792" y="86.3076">Kafka Broker</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="49.2529" x="284.2793" y="102.6045">:29092</text></g><g class="participant participant-tail" data-participant="Kafka"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.2275" x="256.792" y="1634.0078"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.2275" x="263.792" y="1654.0029">Kafka Broker</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="49.2529" x="284.2793" y="1670.2998">:29092</text></g><g class="participant participant-head" data-participant="Notification"><rect fill="#90EE90" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="150.5205" x="449.3174" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136.5205" x="456.3174" y="102.6045">Notification Service</text></g><g class="participant participant-tail" data-participant="Notification"><rect fill="#90EE90" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="150.5205" x="449.3174" y="1634.0078"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="136.5205" x="456.3174" y="1654.0029">Notification Service</text></g><g class="participant participant-head" data-participant="Search"><rect fill="#90EE90" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="118.5967" x="673.7383" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.5967" x="680.7383" y="102.6045">Search Service</text></g><g class="participant participant-tail" data-participant="Search"><rect fill="#90EE90" height="30.2969" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="118.5967" x="673.7383" y="1634.0078"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="104.5967" x="680.7383" y="1654.0029">Search Service</text></g><g class="participant participant-head" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="812.335" y="110.6045">PostgreSQL</text><path d="M837.7114,61.6094 C837.7114,51.6094 855.7114,51.6094 855.7114,51.6094 C855.7114,51.6094 873.7114,51.6094 873.7114,61.6094 L873.7114,87.6094 C873.7114,97.6094 855.7114,97.6094 855.7114,97.6094 C855.7114,97.6094 837.7114,97.6094 837.7114,87.6094 L837.7114,61.6094" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M837.7114,61.6094 C837.7114,71.6094 855.7114,71.6094 855.7114,71.6094 C855.7114,71.6094 873.7114,71.6094 873.7114,61.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="DB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="812.335" y="1647.0029">PostgreSQL</text><path d="M837.7114,1660.3047 C837.7114,1650.3047 855.7114,1650.3047 855.7114,1650.3047 C855.7114,1650.3047 873.7114,1650.3047 873.7114,1660.3047 L873.7114,1686.3047 C873.7114,1696.3047 855.7114,1696.3047 855.7114,1696.3047 C855.7114,1696.3047 837.7114,1696.3047 837.7114,1686.3047 L837.7114,1660.3047" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M837.7114,1660.3047 C837.7114,1670.3047 855.7114,1670.3047 855.7114,1670.3047 C855.7114,1670.3047 873.7114,1670.3047 873.7114,1660.3047" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="ES"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92.4971" x="909.0879" y="110.6045">Elasticsearch</text><path d="M940.3364,61.6094 C940.3364,51.6094 958.3364,51.6094 958.3364,51.6094 C958.3364,51.6094 976.3364,51.6094 976.3364,61.6094 L976.3364,87.6094 C976.3364,97.6094 958.3364,97.6094 958.3364,97.6094 C958.3364,97.6094 940.3364,97.6094 940.3364,87.6094 L940.3364,61.6094" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M940.3364,61.6094 C940.3364,71.6094 958.3364,71.6094 958.3364,71.6094 C958.3364,71.6094 976.3364,71.6094 976.3364,61.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="ES"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="92.4971" x="909.0879" y="1647.0029">Elasticsearch</text><path d="M940.3364,1660.3047 C940.3364,1650.3047 958.3364,1650.3047 958.3364,1650.3047 C958.3364,1650.3047 976.3364,1650.3047 976.3364,1660.3047 L976.3364,1686.3047 C976.3364,1696.3047 958.3364,1696.3047 958.3364,1696.3047 C958.3364,1696.3047 940.3364,1696.3047 940.3364,1686.3047 L940.3364,1660.3047" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M940.3364,1660.3047 C940.3364,1670.3047 958.3364,1670.3047 958.3364,1670.3047 C958.3364,1670.3047 976.3364,1670.3047 976.3364,1660.3047" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="376.8594" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="188.1719"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="267.3281" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="637.2969"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="271.3945" style="stroke:#000000;stroke-width:1;" width="10" x="66.8062" y="983.8906"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="246.1953" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="318.8359"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="136.6641" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="767.9609"/></g><g><title>Kafka Broker</title><rect fill="#FFFFFF" height="140.7305" style="stroke:#000000;stroke-width:1;" width="10" x="303.9058" y="1114.5547"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="217.0625" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="347.9688"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="107.5313" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="797.0938"/></g><g><title>Notification Service</title><rect fill="#FFFFFF" height="111.5977" style="stroke:#000000;stroke-width:1;" width="10" x="519.5776" y="1143.6875"/></g><g><title>Search Service</title><rect fill="#FFFFFF" height="73.3984" style="stroke:#000000;stroke-width:1;" width="10" x="728.0366" y="491.6328"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="188.1719"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="637.2969"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="850.7114" y="983.8906"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1007.585" x="5" y="144.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="144.4727" y2="144.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="147.4727" y2="147.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="164.0269" x="426.7791" y="133.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="145.501" x="432.7791" y="149.9731">Post Creation Event</text><g class="message" data-participant-1="Main" data-participant-2="DB"><polygon fill="#2C3E50" points="838.7114,184.1719,848.7114,188.1719,838.7114,192.1719,842.7114,188.1719" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="844.7114" y1="188.1719" y2="188.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.7051" x="83.8062" y="183.106">Save Post</text></g><g class="message" data-participant-1="DB" data-participant-2="Main"><polygon fill="#2C3E50" points="87.8062,213.3047,77.8062,217.3047,87.8062,221.3047,83.8062,217.3047" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="81.8062" x2="854.7114" y1="217.3047" y2="217.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="71.957" x="93.8062" y="212.2388">Post Saved</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="118.8062" y1="246.4375" y2="246.4375"/><line style="stroke:#2C3E50;stroke-width:1;" x1="118.8062" x2="118.8062" y1="246.4375" y2="259.4375"/><line style="stroke:#2C3E50;stroke-width:1;" x1="77.8062" x2="118.8062" y1="259.4375" y2="259.4375"/><polygon fill="#2C3E50" points="87.8062,255.4375,77.8062,259.4375,87.8062,263.4375,83.8062,259.4375" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="162.9634" x="83.8062" y="241.3716">Create PostDomainEvent</text></g><g class="message" data-participant-1="Main" data-participant-2="Kafka"><polygon fill="#2C3E50" points="291.9058,314.8359,301.9058,318.8359,291.9058,322.8359,295.9058,318.8359" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="297.9058" y1="318.8359" y2="318.8359"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.7495" x="83.8062" y="283.5044">Publish to</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.8994" x="83.8062" y="298.6372">post-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.062" x="174.8379" y="298.6372">topic</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.1094" x="83.8062" y="313.77">(PostEventDto)</text></g><g class="message" data-participant-1="Kafka" data-participant-2="Notification"><polygon fill="#2C3E50" points="507.5776,343.9688,517.5776,347.9688,507.5776,351.9688,511.5776,347.9688" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="313.9058" x2="513.5776" y1="347.9688" y2="347.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.6416" x="320.9058" y="342.9028">Consume post-events</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="392.2344" y2="392.2344"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="392.2344" y2="405.2344"/><line style="stroke:#2C3E50;stroke-width:1;" x1="530.5776" x2="571.5776" y1="405.2344" y2="405.2344"/><polygon fill="#2C3E50" points="540.5776,401.2344,530.5776,405.2344,540.5776,409.2344,536.5776,405.2344" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.0923" x="536.5776" y="372.0356">PostEventHandler</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="115.7749" x="536.5776" y="387.1685">Fan-out to friends</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="449.5" y2="449.5"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="449.5" y2="462.5"/><line style="stroke:#2C3E50;stroke-width:1;" x1="530.5776" x2="571.5776" y1="462.5" y2="462.5"/><polygon fill="#2C3E50" points="540.5776,458.5,530.5776,462.5,540.5776,466.5,536.5776,462.5" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.4927" x="536.5776" y="429.3013">Create notifications</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.5132" x="536.5776" y="444.4341">for each friend</text></g><path d="M685.4927,421.7344 L685.4927,461.7344 L886.4927,461.7344 L886.4927,431.7344 L876.4927,421.7344 L685.4927,421.7344" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M876.4927,421.7344 L876.4927,431.7344 L886.4927,431.7344 L876.4927,421.7344" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.082" x="691.4927" y="438.8013">TODO: Save to DB</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.2861" x="691.4927" y="453.9341">TODO: Send via WebSocket</text><g class="message" data-participant-1="Kafka" data-participant-2="Search"><polygon fill="#2C3E50" points="716.0366,487.6328,726.0366,491.6328,716.0366,495.6328,720.0366,491.6328" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="313.9058" x2="722.0366" y1="491.6328" y2="491.6328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.6416" x="320.9058" y="486.5669">Consume post-events</text></g><g class="message" data-participant-1="Search" data-participant-2="ES"><polygon fill="#2C3E50" points="946.3364,531.8984,956.3364,535.8984,946.3364,539.8984,950.3364,535.8984" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="738.0366" x2="952.3364" y1="535.8984" y2="535.8984"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="67.812" x="745.0366" y="515.6997">Index Post</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.2246" x="745.0366" y="530.8325">for full-text search</text></g><g class="message" data-participant-1="ES" data-participant-2="Search"><polygon fill="#2C3E50" points="744.0366,561.0313,734.0366,565.0313,744.0366,569.0313,740.0366,565.0313" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="738.0366" x2="957.3364" y1="565.0313" y2="565.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="52.2666" x="750.0366" y="559.9653">Indexed</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1007.585" x="5" y="593.5977"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="593.5977" y2="593.5977"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="596.5977" y2="596.5977"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="201.4653" x="408.0598" y="583.0313"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="182.9395" x="414.0598" y="599.0981">Comment Creation Event</text><g class="message" data-participant-1="Main" data-participant-2="DB"><polygon fill="#2C3E50" points="838.7114,633.2969,848.7114,637.2969,838.7114,641.2969,842.7114,637.2969" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="844.7114" y1="637.2969" y2="637.2969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="99.7344" x="83.8062" y="632.231">Save Comment</text></g><g class="message" data-participant-1="DB" data-participant-2="Main"><polygon fill="#2C3E50" points="87.8062,662.4297,77.8062,666.4297,87.8062,670.4297,83.8062,666.4297" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="81.8062" x2="854.7114" y1="666.4297" y2="666.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.9863" x="93.8062" y="661.3638">Comment Saved</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="118.8062" y1="695.5625" y2="695.5625"/><line style="stroke:#2C3E50;stroke-width:1;" x1="118.8062" x2="118.8062" y1="695.5625" y2="708.5625"/><line style="stroke:#2C3E50;stroke-width:1;" x1="77.8062" x2="118.8062" y1="708.5625" y2="708.5625"/><polygon fill="#2C3E50" points="87.8062,704.5625,77.8062,708.5625,87.8062,712.5625,83.8062,708.5625" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.9927" x="83.8062" y="690.4966">Create CommentDomainEvent</text></g><g class="message" data-participant-1="Main" data-participant-2="Kafka"><polygon fill="#2C3E50" points="291.9058,763.9609,301.9058,767.9609,291.9058,771.9609,295.9058,767.9609" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="297.9058" y1="767.9609" y2="767.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.7495" x="83.8062" y="732.6294">Publish to</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.7256" x="83.8062" y="747.7622">comment-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.062" x="210.6641" y="747.7622">topic</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.1387" x="83.8062" y="762.895">(CommentEventDto)</text></g><g class="message" data-participant-1="Kafka" data-participant-2="Notification"><polygon fill="#2C3E50" points="507.5776,793.0938,517.5776,797.0938,507.5776,801.0938,511.5776,797.0938" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="313.9058" x2="513.5776" y1="797.0938" y2="797.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="175.3286" x="320.9058" y="792.0278">Consume comment-events</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="841.3594" y2="841.3594"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="841.3594" y2="854.3594"/><line style="stroke:#2C3E50;stroke-width:1;" x1="530.5776" x2="571.5776" y1="854.3594" y2="854.3594"/><polygon fill="#2C3E50" points="540.5776,850.3594,530.5776,854.3594,540.5776,858.3594,536.5776,854.3594" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.1216" x="536.5776" y="821.1606">CommentEventHandler</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.8379" x="536.5776" y="836.2935">Notify post author</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="903.625" y2="903.625"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="903.625" y2="916.625"/><line style="stroke:#2C3E50;stroke-width:1;" x1="524.5776" x2="571.5776" y1="916.625" y2="916.625"/><polygon fill="#2C3E50" points="534.5776,912.625,524.5776,916.625,534.5776,920.625,530.5776,916.625" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="145.8564" x="536.5776" y="883.4263">Check if self-comment</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.7197" x="536.5776" y="898.5591">Create notification</text></g><path d="M703.8564,870.8594 L703.8564,910.8594 L904.8564,910.8594 L904.8564,880.8594 L894.8564,870.8594 L703.8564,870.8594" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M894.8564,870.8594 L894.8564,880.8594 L904.8564,880.8594 L894.8564,870.8594" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.082" x="709.8564" y="887.9263">TODO: Save to DB</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.2861" x="709.8564" y="903.0591">TODO: Send via WebSocket</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1007.585" x="5" y="940.1914"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="940.1914" y2="940.1914"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="943.1914" y2="943.1914"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="142.5718" x="437.5066" y="929.625"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="124.0459" x="443.5066" y="945.6919">Friendship Event</text><g class="message" data-participant-1="Main" data-participant-2="DB"><polygon fill="#2C3E50" points="838.7114,979.8906,848.7114,983.8906,838.7114,987.8906,842.7114,983.8906" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="844.7114" y1="983.8906" y2="983.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.3638" x="83.8062" y="978.8247">Save Friendship Request</text></g><g class="message" data-participant-1="DB" data-participant-2="Main"><polygon fill="#2C3E50" points="87.8062,1009.0234,77.8062,1013.0234,87.8062,1017.0234,83.8062,1013.0234" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="81.8062" x2="854.7114" y1="1013.0234" y2="1013.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="40.1616" x="93.8062" y="1007.9575">Saved</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="118.8062" y1="1042.1563" y2="1042.1563"/><line style="stroke:#2C3E50;stroke-width:1;" x1="118.8062" x2="118.8062" y1="1042.1563" y2="1055.1563"/><line style="stroke:#2C3E50;stroke-width:1;" x1="77.8062" x2="118.8062" y1="1055.1563" y2="1055.1563"/><polygon fill="#2C3E50" points="87.8062,1051.1563,77.8062,1055.1563,87.8062,1059.1563,83.8062,1055.1563" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.0996" x="83.8062" y="1037.0903">Create FriendshipDomainEvent</text></g><g class="message" data-participant-1="Main" data-participant-2="Kafka"><polygon fill="#2C3E50" points="291.9058,1110.5547,301.9058,1114.5547,291.9058,1118.5547,295.9058,1114.5547" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;" x1="76.8062" x2="297.9058" y1="1114.5547" y2="1114.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.7495" x="83.8062" y="1079.2231">Publish to</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="139.0137" x="83.8062" y="1094.356">notification-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.062" x="226.9521" y="1094.356">topic</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.9766" x="83.8062" y="1109.4888">(NotificationEvent)</text></g><g class="message" data-participant-1="Kafka" data-participant-2="Notification"><polygon fill="#2C3E50" points="507.5776,1139.6875,517.5776,1143.6875,507.5776,1147.6875,511.5776,1143.6875" style="stroke:#2C3E50;stroke-width:1;"/><line style="stroke:#2C3E50;stroke-width:1;stroke-dasharray:2,2;" x1="313.9058" x2="513.5776" y1="1143.6875" y2="1143.6875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="186.6719" x="320.9058" y="1138.6216">Consume notification-events</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="1187.9531" y2="1187.9531"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="1187.9531" y2="1200.9531"/><line style="stroke:#2C3E50;stroke-width:1;" x1="530.5776" x2="571.5776" y1="1200.9531" y2="1200.9531"/><polygon fill="#2C3E50" points="540.5776,1196.9531,530.5776,1200.9531,540.5776,1204.9531,536.5776,1200.9531" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.459" x="536.5776" y="1167.7544">NotificationHandlerFactory</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.2876" x="536.5776" y="1182.8872">Route to handler</text></g><g class="message" data-participant-1="Notification" data-participant-2="Notification"><line style="stroke:#2C3E50;stroke-width:1;" x1="529.5776" x2="571.5776" y1="1254.2852" y2="1254.2852"/><line style="stroke:#2C3E50;stroke-width:1;" x1="571.5776" x2="571.5776" y1="1254.2852" y2="1267.2852"/><line style="stroke:#2C3E50;stroke-width:1;" x1="524.5776" x2="571.5776" y1="1267.2852" y2="1267.2852"/><polygon fill="#2C3E50" points="534.5776,1263.2852,524.5776,1267.2852,534.5776,1271.2852,530.5776,1267.2852" style="stroke:#2C3E50;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.377" x="536.5776" y="1234.0864">RequestFriendshipHandler</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.0811" x="536.5776" y="1249.2192">Handle notification</text></g><path d="M730.377,1213.9531 L730.377,1268.9531 L931.377,1268.9531 L931.377,1223.9531 L921.377,1213.9531 L730.377,1213.9531" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M921.377,1213.9531 L921.377,1223.9531 L931.377,1223.9531 L921.377,1213.9531" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.082" x="736.377" y="1231.02">TODO: Save to DB</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.2861" x="736.377" y="1246.1528">TODO: Send via WebSocket</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.2573" x="736.377" y="1261.2856">TODO: Push notification</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1007.585" x="5" y="1294.918"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="1294.918" y2="1294.918"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1012.585" y1="1297.918" y2="1297.918"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="185.0122" x="416.2864" y="1284.3516"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.4863" x="422.2864" y="1300.4185">Kafka Topics Overview</text><path d="M109,1322.4844 L109,1619.4844 L508,1619.4844 L508,1332.4844 L498,1322.4844 L109,1322.4844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M498,1322.4844 L498,1332.4844 L508,1332.4844 L498,1322.4844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="98.6489" x="115" y="1339.5513">Kafka Topics:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="115" y="1354.6841">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="115" y="1369.8169">1.</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="86.8994" x="131.5356" y="1369.8169">post-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="281.2139" x="127.397" y="1384.9497">- PostEventDto (CREATE, UPDATE, DELETE)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="234.4126" x="127.397" y="1400.0825">- Consumed by: Notification, Search</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="115" y="1415.2153">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="115" y="1430.3481">2.</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.7256" x="131.5356" y="1430.3481">comment-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="365.7773" x="127.397" y="1445.481">- CommentEventDto (CREATE, UPDATE, DELETE, REPLY)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="181.2002" x="127.397" y="1460.6138">- Consumed by: Notification</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="115" y="1475.7466">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="12.4033" x="115" y="1490.8794">3.</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="139.0137" x="131.5356" y="1490.8794">notification-events</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="296.3911" x="127.397" y="1506.0122">- NotificationEvent (FRIENDSHIP, REACTIONS)</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="181.2002" x="127.397" y="1521.145">- Consumed by: Notification</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="115" y="1536.2778">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="66.0601" x="115" y="1551.4106">Benefits:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.7573" x="115" y="1566.5435">- Decoupled services</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.0464" x="115" y="1581.6763">- Async processing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.5244" x="115" y="1596.8091">- Scalable fan-out</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.7583" x="115" y="1611.9419">- Event sourcing</text><!--SRC=[hPRVRzem4CVV_LVSsfSkAjFMQGz3wgH2mbQjAummJPDuCSc5M0IRsGvTDUr_dty1ITiDsWqUWFFtldSvVt3oJ9UuH5XLb752r8Bn5PLq2Jy9cDUCPekv53NF-w8I4eu7YNsxDLNINDmmFeU2LWfTx49ASHEaP_tNoPkNv1SXckaAuICj5XIIDNBTYIKpdqQUbKnZfck9CAZ43I6ckcOPMr6kuUYJQGfIb6kMuH5G1IvmVCNcfUvLDRRLla1FYWNAAU-UlNtvzinb-ONZeQHyVYVdMcXMi8ng9jgLMWk-udk9oDlfAL9p2Qt446gcv5JJ6LK8HoEXz5nY-ldAQUCU77yjaUg69AceCWMKit6g9DseoFavM0leI_ITkN72-JaXRZITTzQp2obTerCIcccsfXhTw7Q_uXunmexHkxokjxLfEScnATiQ1w4hxSrZiJGnry9MvMTj_EfPnLG9Manv5AsCkeDMgAB8n5Oic_8Jw-6oOosUxtfp5eHu9zjYQozC1uAhsZAxCzqbDxMabNZVQ5l_0-LvPQ4PKDuHjJOTGY4PybpjymZZu8seclB2_07C5ClWGimoWhH4T64oZ8TXXqoPk3Vb8MA4i6OKlk8i5Ta2TNC60QizL-zL98XDcc6d2vSynn_kQdrdHLrL7Oq_D7ZAY56rQhY4DWd1kH5fJReHzzlN23ZoBBfziLnQN0-YDuWF1dXZ_WY6GyhX66S-uJx9mUaVO6vRFutdPXTRf9tcrk42jDQba7jjIimMm0f3HrLqGcDJ_W3fJ-NwdoWQ-3zcoLP_vQSX6-Ft6Xzn5Zu2eLsLmobgJl0-Iis1EBSdmFH0XQSHrVmPY1eO8o5lftni3agtrQLVsESLTc4tiIsY_il_86kpCghDjFaVq7eySdxW4xj32ePhUxV76yUTQrEOICW6YAAckXj5n0HVlO0xDq7tk0GTQDu3uQG_JYucoIby6SNkCqwkaadoV2CE-vl3xBQzDwURyzaepsojkoVLpg5rKFsfuYcCaz7Lj_s5RS7Njk23K6_Ixp4D9uFnPN8TfnykHxRMHNzoERnE3wiNHJtaM33jfclbCMQYNbL6h_oJc7BX2tNBCrX9OGBAFAYwO9hHYiuCReM_rxkWRqg9McPMPxcoEqj-0m00]--></g></svg>