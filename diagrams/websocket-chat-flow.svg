<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2586px" preserveAspectRatio="none" style="width:947px;height:2586px;background:#FEFEFE;" version="1.1" viewBox="0 0 947 2586" width="947px" zoomAndPan="magnify"><title>WebSocket Chat Service Flow</title><defs/><g><rect fill="#FEFEFE" height="2586" style="stroke:none;stroke-width:1;" width="947" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="368.6182" x="287.9426" y="35.4209">WebSocket Chat Service Flow</text><g><title>Chat Service</title><rect fill="#FFFFFF" height="457.2578" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="203.1719"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="398.9297" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="762.9609"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="160.7969" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1241.2891"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="249.4609" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1489.4844"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="188.9297" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1826.3438"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="428.125" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="232.3047"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="369.7969" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="792.0938"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="131.6641" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="1270.4219"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="159.7969" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="1855.4766"/></g><g><title>MongoDB</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="678.6494" y="851.4922"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="500.6328"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="924.8906"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1299.5547"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="73.3984" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1575.8828"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1899.7422"/></g><rect fill="#FFFFFF" height="185.8672" style="stroke:#000000;stroke-width:1;" width="652.0278" x="15" y="969.0234"/><rect fill="#FFFFFF" height="65.0703" style="stroke:none;stroke-width:1;" width="652.0278" x="15" y="1089.8203"/><g><title>User A</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="46.9688" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="50" x2="50" y1="128.9063" y2="2504.9922"/></g><g><title>User B</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="108.9199" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="111.9375" x2="111.9375" y1="128.9063" y2="2504.9922"/></g><g><title>Chat Service</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="296.9561" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="300.502" x2="300.502" y1="128.9063" y2="2504.9922"/></g><g><title>WebSocket</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="460.042" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="463.6909" x2="463.6909" y1="128.9063" y2="2504.9922"/></g><g><title>MongoDB</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="679.6494" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="682.9722" x2="682.9722" y1="128.9063" y2="2504.9922"/></g><g><title>Redis</title><rect fill="#000000" fill-opacity="0.00000" height="2376.0859" width="8" x="748.5322" y="128.9063"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="752.3267" x2="752.3267" y1="128.9063" y2="2504.9922"/></g><g class="participant participant-head" data-participant="UserA"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.9375" x="25" y="125.6045">User A</text><ellipse cx="50.9688" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M50.9688,68.6094 L50.9688,95.6094 M37.9688,76.6094 L63.9688,76.6094 M50.9688,95.6094 L37.9688,110.6094 M50.9688,95.6094 L63.9688,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="UserA"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.9375" x="25" y="2516.9873">User A</text><ellipse cx="50.9688" cy="2529.2891" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M50.9688,2537.2891 L50.9688,2564.2891 M37.9688,2545.2891 L63.9688,2545.2891 M50.9688,2564.2891 L37.9688,2579.2891 M50.9688,2564.2891 L63.9688,2579.2891" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="UserB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.9648" x="86.9375" y="125.6045">User B</text><ellipse cx="112.9199" cy="60.6094" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M112.9199,68.6094 L112.9199,95.6094 M99.9199,76.6094 L125.9199,76.6094 M112.9199,95.6094 L99.9199,110.6094 M112.9199,95.6094 L125.9199,110.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="UserB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="45.9648" x="86.9375" y="2516.9873">User B</text><ellipse cx="112.9199" cy="2529.2891" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M112.9199,2537.2891 L112.9199,2564.2891 M99.9199,2545.2891 L125.9199,2545.2891 M112.9199,2564.2891 L99.9199,2579.2891 M112.9199,2564.2891 L125.9199,2579.2891" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="Chat"><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.9082" x="249.502" y="81.3125"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.9082" x="256.502" y="101.3076">Chat Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="280.7832" y="117.6045">:8086</text></g><g class="participant participant-tail" data-participant="Chat"><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.9082" x="249.502" y="2503.9922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.9082" x="256.502" y="2523.9873">Chat Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="280.7832" y="2540.2842">:8086</text></g><g class="participant participant-head" data-participant="WS"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.7021" x="417.6909" y="81.3125"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.7021" x="424.6909" y="101.3076">WebSocket</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55.125" x="436.4795" y="117.6045">Handler</text></g><g class="participant participant-tail" data-participant="WS"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="92.7021" x="417.6909" y="2503.9922"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="78.7021" x="424.6909" y="2523.9873">WebSocket</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="55.125" x="436.4795" y="2540.2842">Handler</text></g><g class="participant participant-head" data-participant="Mongo"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.3545" x="646.9722" y="125.6045">MongoDB</text><path d="M665.6494,76.6094 C665.6494,66.6094 683.6494,66.6094 683.6494,66.6094 C683.6494,66.6094 701.6494,66.6094 701.6494,76.6094 L701.6494,102.6094 C701.6494,112.6094 683.6494,112.6094 683.6494,112.6094 C683.6494,112.6094 665.6494,112.6094 665.6494,102.6094 L665.6494,76.6094" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M665.6494,76.6094 C665.6494,86.6094 683.6494,86.6094 683.6494,86.6094 C683.6494,86.6094 701.6494,86.6094 701.6494,76.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Mongo"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.3545" x="646.9722" y="2516.9873">MongoDB</text><path d="M665.6494,2530.2891 C665.6494,2520.2891 683.6494,2520.2891 683.6494,2520.2891 C683.6494,2520.2891 701.6494,2520.2891 701.6494,2530.2891 L701.6494,2556.2891 C701.6494,2566.2891 683.6494,2566.2891 683.6494,2566.2891 C683.6494,2566.2891 665.6494,2566.2891 665.6494,2556.2891 L665.6494,2530.2891" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M665.6494,2530.2891 C665.6494,2540.2891 683.6494,2540.2891 683.6494,2540.2891 C683.6494,2540.2891 701.6494,2540.2891 701.6494,2530.2891" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="Redis"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="38.4111" x="730.3267" y="125.6045">Redis</text><path d="M734.5322,76.6094 C734.5322,66.6094 752.5322,66.6094 752.5322,66.6094 C752.5322,66.6094 770.5322,66.6094 770.5322,76.6094 L770.5322,102.6094 C770.5322,112.6094 752.5322,112.6094 752.5322,112.6094 C752.5322,112.6094 734.5322,112.6094 734.5322,102.6094 L734.5322,76.6094" fill="#FFFF00" style="stroke:#000000;stroke-width:1;"/><path d="M734.5322,76.6094 C734.5322,86.6094 752.5322,86.6094 752.5322,86.6094 C752.5322,86.6094 770.5322,86.6094 770.5322,76.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Redis"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="38.4111" x="730.3267" y="2516.9873">Redis</text><path d="M734.5322,2530.2891 C734.5322,2520.2891 752.5322,2520.2891 752.5322,2520.2891 C752.5322,2520.2891 770.5322,2520.2891 770.5322,2530.2891 L770.5322,2556.2891 C770.5322,2566.2891 752.5322,2566.2891 752.5322,2566.2891 C752.5322,2566.2891 734.5322,2566.2891 734.5322,2556.2891 L734.5322,2530.2891" fill="#FFFF00" style="stroke:#000000;stroke-width:1;"/><path d="M734.5322,2530.2891 C734.5322,2540.2891 752.5322,2540.2891 752.5322,2540.2891 C752.5322,2540.2891 770.5322,2540.2891 770.5322,2530.2891" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="457.2578" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="203.1719"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="398.9297" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="762.9609"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="160.7969" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1241.2891"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="249.4609" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1489.4844"/></g><g><title>Chat Service</title><rect fill="#FFFFFF" height="188.9297" style="stroke:#000000;stroke-width:1;" width="10" x="295.9561" y="1826.3438"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="428.125" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="232.3047"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="369.7969" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="792.0938"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="131.6641" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="1270.4219"/></g><g><title>WebSocket</title><rect fill="#FFFFFF" height="159.7969" style="stroke:#000000;stroke-width:1;" width="10" x="459.042" y="1855.4766"/></g><g><title>MongoDB</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="678.6494" y="851.4922"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="500.6328"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="924.8906"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1299.5547"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="73.3984" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1575.8828"/></g><g><title>Redis</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="747.5322" y="1899.7422"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="159.4727" y2="159.4727"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="162.4727" y2="162.4727"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="187.5513" x="378.9761" y="148.9063"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169.0254" x="384.9761" y="164.9731">WebSocket Connection</text><g class="message" data-participant-1="UserA" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,199.1719,293.9561,203.1719,283.9561,207.1719,287.9561,203.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="50.9688" x2="289.9561" y1="203.1719" y2="203.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.2153" x="57.9688" y="198.106">Connect to ws://localhost:8086/ws</text></g><g class="message" data-participant-1="Chat" data-participant-2="WS"><polygon fill="#000000" points="447.042,228.3047,457.042,232.3047,447.042,236.3047,451.042,232.3047" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="453.042" y1="232.3047" y2="232.3047"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.5317" x="312.9561" y="227.2388">Handle Connection</text></g><g class="message" data-participant-1="WS" data-participant-2="WS"><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="511.042" y1="276.5703" y2="276.5703"/><line style="stroke:#000000;stroke-width:2;" x1="511.042" x2="511.042" y1="276.5703" y2="289.5703"/><line style="stroke:#000000;stroke-width:2;" x1="470.042" x2="511.042" y1="289.5703" y2="289.5703"/><polygon fill="#000000" points="480.042,285.5703,470.042,289.5703,480.042,293.5703,476.042,289.5703" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="172.8784" x="476.042" y="256.3716">TODO: Validate JWT Token</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.5039" x="476.042" y="271.5044">(Security pending)</text></g><g class="message" data-participant-1="WS" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,325.2695,51.9688,329.2695,61.9688,333.2695,57.9688,329.2695" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="458.042" y1="329.2695" y2="329.2695"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.4771" x="67.9688" y="324.2036">Connection Established</text></g><path d="M474,302.5703 L474,342.5703 L669,342.5703 L669,312.5703 L659,302.5703 L474,302.5703" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M659,302.5703 L659,312.5703 L669,312.5703 L659,302.5703" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.167" x="480" y="319.6372">Current: No authentication</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.6929" x="480" y="334.77">TODO: JWT validation</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="368.4023"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="368.4023" y2="368.4023"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="371.4023" y2="371.4023"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="130.2192" x="407.6421" y="357.8359"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111.6934" x="413.6421" y="373.9028">User Join Event</text><g class="message" data-participant-1="UserA" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,423.2344,293.9561,427.2344,283.9561,431.2344,287.9561,427.2344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="50.9688" x2="289.9561" y1="427.2344" y2="427.2344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.999" x="57.9688" y="407.0356">JOIN Event</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.9863" x="57.9688" y="422.1685">{userId: 1, username: "Alice"}</text></g><g class="message" data-participant-1="Chat" data-participant-2="WS"><polygon fill="#000000" points="447.042,452.3672,457.042,456.3672,447.042,460.3672,451.042,456.3672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="453.042" y1="456.3672" y2="456.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.5864" x="312.9561" y="451.3013">Process JOIN</text></g><g class="message" data-participant-1="WS" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,496.6328,745.5322,500.6328,735.5322,504.6328,739.5322,500.6328" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="741.5322" y1="500.6328" y2="500.6328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="125.6265" x="476.042" y="480.4341">Add to online users</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.1973" x="476.042" y="495.5669">SET online:1 "Alice"</text></g><g class="message" data-participant-1="Redis" data-participant-2="WS"><polygon fill="#000000" points="480.042,525.7656,470.042,529.7656,480.042,533.7656,476.042,529.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="474.042" x2="751.5322" y1="529.7656" y2="529.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="75.4102" x="486.042" y="524.6997">User Added</text></g><g class="message" data-participant-1="WS" data-participant-2="WS"><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="511.042" y1="558.8984" y2="558.8984"/><line style="stroke:#000000;stroke-width:2;" x1="511.042" x2="511.042" y1="558.8984" y2="571.8984"/><line style="stroke:#000000;stroke-width:2;" x1="470.042" x2="511.042" y1="571.8984" y2="571.8984"/><polygon fill="#000000" points="480.042,567.8984,470.042,571.8984,480.042,575.8984,476.042,571.8984" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.1846" x="476.042" y="553.8325">Broadcast to all users</text></g><g class="message" data-participant-1="WS" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,612.1641,51.9688,616.1641,61.9688,620.1641,57.9688,616.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="458.042" y1="616.1641" y2="616.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="60.6201" x="67.9688" y="595.9653">JOIN_ACK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="218.042" x="67.9688" y="611.0981">{message: "Joined successfully"}</text></g><g class="message" data-participant-1="WS" data-participant-2="UserB"><polygon fill="#000000" points="123.9199,656.4297,113.9199,660.4297,123.9199,664.4297,119.9199,660.4297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="117.9199" x2="463.042" y1="660.4297" y2="660.4297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="87.3628" x="129.9199" y="640.231">USER_JOINED</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.9863" x="129.9199" y="655.3638">{userId: 1, username: "Alice"}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="688.9961"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="688.9961" y2="688.9961"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="691.9961" y2="691.9961"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="146.9326" x="399.2854" y="678.4297"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="128.4067" x="405.2854" y="694.4966">Sending Message</text><g class="message" data-participant-1="UserA" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,758.9609,293.9561,762.9609,283.9561,766.9609,287.9561,762.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="50.9688" x2="289.9561" y1="762.9609" y2="762.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.3096" x="57.9688" y="727.6294">SEND Message</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="176.1475" x="57.9688" y="742.7622">{senderId: 1, receiverId: 2,</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.79" x="57.9688" y="757.895">text: "Hello!"}</text></g><g class="message" data-participant-1="Chat" data-participant-2="WS"><polygon fill="#000000" points="447.042,788.0938,457.042,792.0938,447.042,796.0938,451.042,792.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="453.042" y1="792.0938" y2="792.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.938" x="312.9561" y="787.0278">Process Message</text></g><g class="message" data-participant-1="WS" data-participant-2="Mongo"><polygon fill="#000000" points="666.6494,847.4922,676.6494,851.4922,666.6494,855.4922,670.6494,851.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="672.6494" y1="851.4922" y2="851.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.0186" x="476.042" y="816.1606">Save Message</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="190.6074" x="476.042" y="831.2935">{from: 1, to: 2, text: "Hello!",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.8745" x="476.042" y="846.4263">timestamp: now()}</text></g><g class="message" data-participant-1="Mongo" data-participant-2="WS"><polygon fill="#000000" points="480.042,876.625,470.042,880.625,480.042,884.625,476.042,880.625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="474.042" x2="682.6494" y1="880.625" y2="880.625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.2705" x="486.042" y="875.5591">Message Saved</text></g><g class="message" data-participant-1="WS" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,920.8906,745.5322,924.8906,735.5322,928.8906,739.5322,924.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="741.5322" y1="924.8906" y2="924.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.4282" x="476.042" y="904.6919">Check if User B is online</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="82.6655" x="476.042" y="919.8247">GET online:2</text></g><g class="message" data-participant-1="Redis" data-participant-2="WS"><polygon fill="#000000" points="480.042,950.0234,470.042,954.0234,480.042,958.0234,476.042,954.0234" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="474.042" x2="751.5322" y1="954.0234" y2="954.0234"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.9849" x="486.042" y="948.9575">User B is online</text></g><path d="M15,969.0234 L79.4429,969.0234 L79.4429,976.1563 L69.4429,986.1563 L15,986.1563 L15,969.0234" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="185.8672" style="stroke:#000000;stroke-width:1;" width="652.0278" x="15" y="969.0234"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="30" y="982.0903">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="108.625" x="94.4429" y="981.2339">[User B is Online]</text><g class="message" data-participant-1="WS" data-participant-2="UserB"><polygon fill="#000000" points="123.9199,1033.5547,113.9199,1037.5547,123.9199,1041.5547,119.9199,1037.5547" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="117.9199" x2="458.042" y1="1037.5547" y2="1037.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="63.1147" x="129.9199" y="1002.2231">MESSAGE</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="152.5088" x="129.9199" y="1017.356">{from: 1, text: "Hello!",</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="111.2617" x="129.9199" y="1032.4888">timestamp: "..."}</text></g><g class="message" data-participant-1="WS" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,1077.8203,51.9688,1081.8203,61.9688,1085.8203,57.9688,1081.8203" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="458.042" y1="1081.8203" y2="1081.8203"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.7412" x="67.9688" y="1061.6216">MESSAGE_SENT_ACK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="137.7188" x="67.9688" y="1076.7544">{status: "delivered"}</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="15" x2="667.0278" y1="1090.8203" y2="1090.8203"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110.3652" x="20" y="1101.0308">[User B is Offline]</text><g class="message" data-participant-1="WS" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,1139.8906,51.9688,1143.8906,61.9688,1147.8906,57.9688,1143.8906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="458.042" y1="1143.8906" y2="1143.8906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="136.7412" x="67.9688" y="1123.6919">MESSAGE_SENT_ACK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.3774" x="67.9688" y="1138.8247">{status: "stored"}</text></g><path d="M474,1109.625 L474,1149.625 L656,1149.625 L656,1119.625 L646,1109.625 L474,1109.625" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M646,1109.625 L646,1119.625 L656,1119.625 L646,1109.625" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="161.9858" x="480" y="1126.6919">TODO: Implement offline</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.7593" x="480" y="1141.8247">message delivery</text><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="1182.457"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1182.457" y2="1182.457"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1185.457" y2="1185.457"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="138.6045" x="403.4495" y="1171.8906"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="120.0786" x="409.4495" y="1187.9575">Typing Indicator</text><g class="message" data-participant-1="UserB" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,1237.2891,293.9561,1241.2891,283.9561,1245.2891,287.9561,1241.2891" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="112.9199" x2="289.9561" y1="1241.2891" y2="1241.2891"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.7275" x="119.9199" y="1221.0903">TYPING Event</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.0361" x="119.9199" y="1236.2231">{userId: 2, receiverId: 1}</text></g><g class="message" data-participant-1="Chat" data-participant-2="WS"><polygon fill="#000000" points="447.042,1266.4219,457.042,1270.4219,447.042,1274.4219,451.042,1270.4219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="453.042" y1="1270.4219" y2="1270.4219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.9507" x="312.9561" y="1265.356">Process Typing</text></g><g class="message" data-participant-1="WS" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,1295.5547,745.5322,1299.5547,735.5322,1303.5547,739.5322,1299.5547" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="741.5322" y1="1299.5547" y2="1299.5547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.4028" x="476.042" y="1294.4888">Check if User A is online</text></g><g class="message" data-participant-1="Redis" data-participant-2="WS"><polygon fill="#000000" points="480.042,1324.6875,470.042,1328.6875,480.042,1332.6875,476.042,1328.6875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="474.042" x2="751.5322" y1="1328.6875" y2="1328.6875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.9595" x="486.042" y="1323.6216">User A is online</text></g><g class="message" data-participant-1="WS" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,1368.9531,51.9688,1372.9531,61.9688,1376.9531,57.9688,1372.9531" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="458.042" y1="1372.9531" y2="1372.9531"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.4326" x="67.9688" y="1352.7544">TYPING_INDICATOR</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="192.8481" x="67.9688" y="1367.8872">{userId: 2, username: "Bob"}</text></g><g class="message" data-participant-1="WS" data-participant-2="UserB"><polygon fill="#000000" points="123.9199,1398.0859,113.9199,1402.0859,123.9199,1406.0859,119.9199,1402.0859" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="117.9199" x2="463.042" y1="1402.0859" y2="1402.0859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.3486" x="129.9199" y="1397.02">TYPING_ACK</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="1430.6523"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1430.6523" y2="1430.6523"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1433.6523" y2="1433.6523"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="173.6943" x="385.9045" y="1420.0859"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="155.1685" x="391.9045" y="1436.1528">Check Online Friends</text><g class="message" data-participant-1="UserA" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,1485.4844,293.9561,1489.4844,283.9561,1493.4844,287.9561,1489.4844" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="50.9688" x2="289.9561" y1="1489.4844" y2="1489.4844"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="123.8809" x="57.9688" y="1469.2856">GET /online-friends</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="57.9688" y="1484.4185">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Chat" data-participant-2="Chat"><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="347.9561" y1="1518.6172" y2="1518.6172"/><line style="stroke:#000000;stroke-width:2;" x1="347.9561" x2="347.9561" y1="1518.6172" y2="1531.6172"/><line style="stroke:#000000;stroke-width:2;" x1="306.9561" x2="347.9561" y1="1531.6172" y2="1531.6172"/><polygon fill="#000000" points="316.9561,1527.6172,306.9561,1531.6172,316.9561,1535.6172,312.9561,1531.6172" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.0859" x="312.9561" y="1513.5513">TODO: Validate JWT</text></g><path d="M463.0859,1505.9844 L463.0859,1530.9844 L632.0859,1530.9844 L632.0859,1515.9844 L622.0859,1505.9844 L463.0859,1505.9844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M622.0859,1505.9844 L622.0859,1515.9844 L632.0859,1515.9844 L622.0859,1505.9844" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.3003" x="469.0859" y="1523.0513">Authentication needed</text><g class="message" data-participant-1="Chat" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,1571.8828,745.5322,1575.8828,735.5322,1579.8828,739.5322,1575.8828" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="741.5322" y1="1575.8828" y2="1575.8828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="212.0879" x="312.9561" y="1555.6841">Get friend IDs from Main Service</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.8936" x="312.9561" y="1570.8169">(via Feign Client)</text></g><path d="M762,1549.1836 L762,1574.1836 L939,1574.1836 L939,1559.1836 L929,1549.1836 L762,1549.1836" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M929,1549.1836 L929,1559.1836 L939,1559.1836 L929,1549.1836" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.9712" x="768" y="1566.2505">Fetch friendIds: [2, 3, 5]</text><g class="message" data-participant-1="Chat" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,1616.1484,745.5322,1620.1484,735.5322,1624.1484,739.5322,1620.1484" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="741.5322" y1="1620.1484" y2="1620.1484"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.8545" x="312.9561" y="1599.9497">Check online status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.7559" x="312.9561" y="1615.0825">MGET online:2 online:3 online:5</text></g><g class="message" data-participant-1="Redis" data-participant-2="Chat"><polygon fill="#000000" points="316.9561,1645.2813,306.9561,1649.2813,316.9561,1653.2813,312.9561,1649.2813" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="310.9561" x2="751.5322" y1="1649.2813" y2="1649.2813"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.3481" x="322.9561" y="1644.2153">[Bob, Charlie, null]</text></g><g class="message" data-participant-1="Chat" data-participant-2="UserA"><polygon fill="#000000" points="61.9688,1734.9453,51.9688,1738.9453,61.9688,1742.9453,57.9688,1738.9453" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="55.9688" x2="299.9561" y1="1738.9453" y2="1738.9453"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="67.9688" y="1673.3481">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.2051" x="67.9688" y="1688.481">{onlineFriends: [</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="140.0483" x="76.2334" y="1703.6138">{id: 2, name: "Bob"},</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="156.6411" x="76.2334" y="1718.7466">{id: 3, name: "Charlie"}</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="13.3428" x="67.9688" y="1733.8794">]}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="1767.5117"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1767.5117" y2="1767.5117"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="1770.5117" y2="1770.5117"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="185.355" x="380.0742" y="1756.9453"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.8291" x="386.0742" y="1773.0122">User Leave/Disconnect</text><g class="message" data-participant-1="UserA" data-participant-2="Chat"><polygon fill="#000000" points="283.9561,1822.3438,293.9561,1826.3438,283.9561,1830.3438,287.9561,1826.3438" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="50.9688" x2="289.9561" y1="1826.3438" y2="1826.3438"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="106.228" x="57.9688" y="1806.145">LEAVE Event OR</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="121.3545" x="57.9688" y="1821.2778">Connection Closed</text></g><g class="message" data-participant-1="Chat" data-participant-2="WS"><polygon fill="#000000" points="447.042,1851.4766,457.042,1855.4766,447.042,1859.4766,451.042,1855.4766" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="305.9561" x2="453.042" y1="1855.4766" y2="1855.4766"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.1787" x="312.9561" y="1850.4106">Process Disconnect</text></g><g class="message" data-participant-1="WS" data-participant-2="Redis"><polygon fill="#000000" points="735.5322,1895.7422,745.5322,1899.7422,735.5322,1903.7422,739.5322,1899.7422" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="741.5322" y1="1899.7422" y2="1899.7422"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="171.0566" x="476.042" y="1879.5435">Remove from online users</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.9038" x="476.042" y="1894.6763">DEL online:1</text></g><g class="message" data-participant-1="Redis" data-participant-2="WS"><polygon fill="#000000" points="480.042,1924.875,470.042,1928.875,480.042,1932.875,476.042,1928.875" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="474.042" x2="751.5322" y1="1928.875" y2="1928.875"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="95.3545" x="486.042" y="1923.8091">User Removed</text></g><g class="message" data-participant-1="WS" data-participant-2="WS"><line style="stroke:#000000;stroke-width:2;" x1="469.042" x2="511.042" y1="1958.0078" y2="1958.0078"/><line style="stroke:#000000;stroke-width:2;" x1="511.042" x2="511.042" y1="1958.0078" y2="1971.0078"/><line style="stroke:#000000;stroke-width:2;" x1="470.042" x2="511.042" y1="1971.0078" y2="1971.0078"/><polygon fill="#000000" points="480.042,1967.0078,470.042,1971.0078,480.042,1975.0078,476.042,1971.0078" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="141.1846" x="476.042" y="1952.9419">Broadcast to all users</text></g><g class="message" data-participant-1="WS" data-participant-2="UserB"><polygon fill="#000000" points="123.9199,2011.2734,113.9199,2015.2734,123.9199,2019.2734,119.9199,2015.2734" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="117.9199" x2="463.042" y1="2015.2734" y2="2015.2734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="72.3887" x="129.9199" y="1995.0747">USER_LEFT</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="198.9863" x="129.9199" y="2010.2075">{userId: 1, username: "Alice"}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="935.5034" x="5" y="2043.8398"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="2043.8398" y2="2043.8398"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="940.5034" y1="2046.8398" y2="2046.8398"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="130.3779" x="407.5627" y="2033.2734"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="111.8521" x="413.5627" y="2049.3403">Message Types</text><path d="M134,2071.4063 L134,2489.4063 L466,2489.4063 L466,2081.4063 L456,2071.4063 L134,2071.4063" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M456,2071.4063 L456,2081.4063 L466,2081.4063 L456,2071.4063" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="181.2319" x="140" y="2088.4731">WebSocket Event Types:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="140" y="2103.606">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116.1748" x="140" y="2118.7388">Client &#8594; Server:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="200.2305" x="140" y="2133.8716">- JOIN: User connects and joins</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="253.4746" x="140" y="2149.0044">- SEND: Send message to another user</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.0347" x="140" y="2164.1372">- TYPING: Typing indicator</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="169.7871" x="140" y="2179.27">- LEAVE: User disconnects</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="140" y="2194.4028">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="116.1748" x="140" y="2209.5356">Server &#8594; Client:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="188.1318" x="140" y="2224.6685">- JOIN_ACK: Join confirmation</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="246.4033" x="140" y="2239.8013">- USER_JOINED: Broadcast user joined</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="231.5371" x="140" y="2254.9341">- MESSAGE: New message received</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="311.4668" x="140" y="2270.0669">- MESSAGE_SENT_ACK: Message delivery status</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="233.1938" x="140" y="2285.1997">- TYPING_INDICATOR: User is typing</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="213.0464" x="140" y="2300.3325">- USER_LEFT: Broadcast user left</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="157.6377" x="140" y="2315.4653">- ERROR: Error message</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="140" y="2330.5981">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="122.1035" x="140" y="2345.731">TODO - Security:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="223.4058" x="140" y="2360.8638">- JWT authentication in handshake</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="180.6353" x="140" y="2375.9966">- Room-based authorization</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.3179" x="140" y="2391.1294">- Encrypted sensitive messages</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="4.1323" x="140" y="2406.2622">&#160;</text><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="126.312" x="140" y="2421.395">TODO - Features:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.5615" x="140" y="2436.5278">- Offline message delivery</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="98.4268" x="140" y="2451.6606">- Read receipts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="135.313" x="140" y="2466.7935">- Group chat support</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.0811" x="140" y="2481.9263">- File sharing</text><!--SRC=[hLTjRzis4FwkNt5plhH1qhGfEXJ2Ki0lSkekYGlRQr3KHS18jCr59ZsIjfSL-ReVi9-uNx8xKf8fnqiDRCaNMRoNv-uUtfr-i3C-vx38cP1HPEw4N33Dvl0j0loxPUdTLAkbpDegLneEkWdzkpCpOvbQ2pc52SiDz-_uRqikKzxKMgr7Cv7UIMuCd4OFKMI5pJbSyzkXIk-uXVQCMHXolH8fXswkrb74KejE6hyOhg7P06Q07fkrzwtgVIj2g5QaOi6aXKPeRopZjo_V_kX4tVk32p6TsLQ-v7Mb2ivOlcSooxbsEjT3EEXh9gSyofXbjynmQ5mgELKTxzyzmy7rZ3CRY0nu9emJS4zmy9ddBhApip1o9ILFhL0IpiwYoCK8n-yyqhWy1gjWRUAJarobB9yfOrrC9sj3-H0hPhdJY9mQgYFe67mKWOkDyFKmGf5ISDJlz6Fun7AHqU67wn6Cr1sNO_bioDEb5lOU5bncME3dJWyLFT8u320n67ikp8ndaLHeI5EYKMIfDPVuSAM0BP5a4fFEI6KilMlokFBk2IQbo1NuWn9eTeKAExFpeT-xyiTZ-Ms9XxqiXbT7G8-IpNaCZMQE56Wyr1FpKQkKk4ZwHHvyZM9ePXabMybSIEuCcR4S9gFYJVogDBd9fLEDl87ZqeNdRPPXAZA-9HgclgKLor9cN8bPddkNsqace3VDziyOvXo1ioc5HidX6PXbIi5Cbdb-Zu46cYt2CKm6DwIUTBwRem0eyYFuvQX5HHbw4i2b1x6pACFagbCAe4k3AfLJpLCkLlxdwT5OMluxqgBndcx63uZW2JANDIiirwXS9DHVH4J0LZn0CD5gxhnRHLwXxfHG24ogPVD535AjdpqFS3YJaJTSrRQCdlpKokkbjnZLdl7q3iJ4Kw85-D9pQIpFDxmwtOTFWV8ELh7S1c9zBqQTU8iIbybms3nFQfbv8YMD5ozUO6cs33KtXcwmugE2dQXZbmQLCfvJeNc6gXn7GeXiCja5xNiM3VPzPuxqmlRYMqXlliXnUc6dKDx-M1PN1Geizn5ICTg3vQFx1P6yXrp7DeNJfgHvAw3vwFF7tjNve-vpMYVvgxquxHtkelHk4ZK37kpJXfwapLO9V5mtlQjEhzqSzGVrs8AkqLAtZzjDeOsbsoFFFYXFLEXgWUKnEriAtPCJ7y3nnCkDPHCdYTBY3pSoi95ofZ7MdomDhdV_alMoTe_cNMrUDMip2YJdrCOh8sLDpd5yUpJGwnYWomINk3fj5ezdAy6WoyLKGZj7GVjykroXsowtwQomsCkGybymuQ-FuCtNnxvzweefvQ_8M5w6_QHyU5q-l0cuKUJX2zRmY7veH7S44aV8rnqCySu3Zfo-V0bzkfpUT54wj3UM0D-4fqf8awFgu7LrKBXjF8pbruUT_73alU3OPKywmgJ5AhIB81T9yrDIB0f4sM0fQUVAOFNsk8KR7q_Tn06VAnmlhjhrBQ6JN5HRmZxNqblwp_j1DUKlakxeVvZnvNJ3fiJzTNGaHQZQ2m4S7cuMM9zq9nmV7aRkr9CT_lxpBtSNkAOJW6EtnnJH5wasW4ig_8ghZ74Ij3t4Ri-0idrJu0XXXaeKa1FpVIOkMxKeMxKxT6met6HLKOt7vW4vR1vcY8qQL-otJjIQ23tt2ocT1vjKM1Q2vF1Z9Kci666uxF9r5K8n4ceIrP3RB1Jbe2fkT13ffXyNSI6Rh9yQ5JQg_oDaEPzO9v8C1gISuDUOBd7vZ50tfCmNctwL3zp9wziwfXbcM2xyshlZJcQWrFoOFdSo9rgrO-zHflf-OMb5vT88v1al7PkQvov-E2srvmyf5Wi2F9hVpYLdcS_dmleCdUD7wG9Ikj9ckLWexGFk2lpsGQYQaaHy8Xf7_m00]--></g></svg>