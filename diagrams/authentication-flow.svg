<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="2654px" preserveAspectRatio="none" style="width:1166px;height:2654px;background:#FEFEFE;" version="1.1" viewBox="0 0 1166 2654" width="1166px" zoomAndPan="magnify"><title>Authentication &amp; Authorization Flow</title><defs/><g><rect fill="#FEFEFE" height="2654" style="stroke:none;stroke-width:1;" width="1166" x="0" y="0"/><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="453.2559" x="355.2427" y="35.4209">Authentication &amp; Authorization Flow</text><g><title>API Gateway</title><rect fill="#FFFFFF" height="364.8594" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="219.6016"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="753.8516" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="671.8594"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="160.7969" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="1991.3672"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="175.9297" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="2239.5625"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="291.4609" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="248.7344"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="232.1953" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="773.3906"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="144.6641" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="1599.5078"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="102.5313" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="2020.5"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="117.6641" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="2268.6953"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="244.0625" style="stroke:#000000;stroke-width:1;" width="10" x="805.1899" y="1137.3828"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="390.8594" style="stroke:#000000;stroke-width:1;" width="10" x="805.1899" y="1513.1094"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="277.8672"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="408.5313"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="466.7969"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="874.9219"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="1670.7734"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="2049.6328"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="2312.9609"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1106.3647" y="1308.0469"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1106.3647" y="1830.5703"/></g><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="24.9551" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="28" x2="28" y1="130.2031" y2="2559.4219"/></g><g><title>API Gateway</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="293.8984" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="297.6768" x2="297.6768" y1="130.2031" y2="2559.4219"/></g><g><title>Auth Service</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="604.3071" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="607.8052" x2="607.8052" y1="130.2031" y2="2559.4219"/></g><g><title>Main Service</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="806.1899" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="809.3838" x2="809.3838" y1="130.2031" y2="2559.4219"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="1010.6118" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1014.2354" x2="1014.2354" y1="130.2031" y2="2559.4219"/></g><g><title>PostgreSQL</title><rect fill="#000000" fill-opacity="0.00000" height="2429.2188" width="8" x="1107.3647" y="130.2031"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:5,5;" x1="1110.9883" x2="1110.9883" y1="130.2031" y2="2559.4219"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="10" y="126.9014">User</text><ellipse cx="28.9551" cy="61.9063" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9551,69.9063 L28.9551,96.9063 M15.9551,77.9063 L41.9551,77.9063 M28.9551,96.9063 L15.9551,111.9063 M28.9551,96.9063 L41.9551,111.9063" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.9102" x="10" y="2571.417">User</text><ellipse cx="28.9551" cy="2583.7188" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9551,2591.7188 L28.9551,2618.7188 M15.9551,2599.7188 L41.9551,2599.7188 M28.9551,2618.7188 L15.9551,2633.7188 M28.9551,2618.7188 L41.9551,2633.7188" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="Gateway"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.4434" x="246.6768" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="253.6768" y="102.6045">API Gateway</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="277.7256" y="118.9014">:8080</text></g><g class="participant participant-tail" data-participant="Gateway"><rect fill="#FFA500" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="102.4434" x="246.6768" y="2558.4219"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="88.4434" x="253.6768" y="2578.417">API Gateway</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="277.7256" y="2594.7139">:8080</text></g><g class="participant participant-head" data-participant="Auth"><rect fill="#008000" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.0039" x="556.8052" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="563.8052" y="102.6045">Auth Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="588.1343" y="118.9014">:8087</text></g><g class="participant participant-tail" data-participant="Auth"><rect fill="#008000" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.0039" x="556.8052" y="2558.4219"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.0039" x="563.8052" y="2578.417">Auth Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="588.1343" y="2594.7139">:8087</text></g><g class="participant participant-head" data-participant="Main"><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.6123" x="758.3838" y="82.6094"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.6123" x="765.3838" y="102.6045">Main Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="790.0171" y="118.9014">:8083</text></g><g class="participant participant-tail" data-participant="Main"><rect fill="#ADD8E6" height="46.5938" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="103.6123" x="758.3838" y="2558.4219"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="89.6123" x="765.3838" y="2578.417">Main Service</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="40.3457" x="790.0171" y="2594.7139">:8083</text></g><g class="participant participant-head" data-participant="AuthDB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="971.2354" y="110.6045">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="68.5713" x="977.3262" y="126.9014">(Auth DB)</text><path d="M996.6118,61.6094 C996.6118,51.6094 1014.6118,51.6094 1014.6118,51.6094 C1014.6118,51.6094 1032.6118,51.6094 1032.6118,61.6094 L1032.6118,87.6094 C1032.6118,97.6094 1014.6118,97.6094 1014.6118,97.6094 C1014.6118,97.6094 996.6118,97.6094 996.6118,87.6094 L996.6118,61.6094" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M996.6118,61.6094 C996.6118,71.6094 1014.6118,71.6094 1014.6118,71.6094 C1014.6118,71.6094 1032.6118,71.6094 1032.6118,61.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="AuthDB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="971.2354" y="2571.417">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="68.5713" x="977.3262" y="2587.7139">(Auth DB)</text><path d="M996.6118,2601.0156 C996.6118,2591.0156 1014.6118,2591.0156 1014.6118,2591.0156 C1014.6118,2591.0156 1032.6118,2591.0156 1032.6118,2601.0156 L1032.6118,2627.0156 C1032.6118,2637.0156 1014.6118,2637.0156 1014.6118,2637.0156 C1014.6118,2637.0156 996.6118,2637.0156 996.6118,2627.0156 L996.6118,2601.0156" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M996.6118,2601.0156 C996.6118,2611.0156 1014.6118,2611.0156 1014.6118,2611.0156 C1014.6118,2611.0156 1032.6118,2611.0156 1032.6118,2601.0156" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="MainDB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="1067.9883" y="110.6045">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1797" x="1073.7749" y="126.9014">(Main DB)</text><path d="M1093.3647,61.6094 C1093.3647,51.6094 1111.3647,51.6094 1111.3647,51.6094 C1111.3647,51.6094 1129.3647,51.6094 1129.3647,61.6094 L1129.3647,87.6094 C1129.3647,97.6094 1111.3647,97.6094 1111.3647,97.6094 C1111.3647,97.6094 1093.3647,97.6094 1093.3647,87.6094 L1093.3647,61.6094" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M1093.3647,61.6094 C1093.3647,71.6094 1111.3647,71.6094 1111.3647,71.6094 C1111.3647,71.6094 1129.3647,71.6094 1129.3647,61.6094" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="MainDB"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="80.7529" x="1067.9883" y="2571.417">PostgreSQL</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="69.1797" x="1073.7749" y="2587.7139">(Main DB)</text><path d="M1093.3647,2601.0156 C1093.3647,2591.0156 1111.3647,2591.0156 1111.3647,2591.0156 C1111.3647,2591.0156 1129.3647,2591.0156 1129.3647,2601.0156 L1129.3647,2627.0156 C1129.3647,2637.0156 1111.3647,2637.0156 1111.3647,2637.0156 C1111.3647,2637.0156 1093.3647,2637.0156 1093.3647,2627.0156 L1093.3647,2601.0156" fill="#F5DEB3" style="stroke:#000000;stroke-width:1;"/><path d="M1093.3647,2601.0156 C1093.3647,2611.0156 1111.3647,2611.0156 1111.3647,2611.0156 C1111.3647,2611.0156 1129.3647,2611.0156 1129.3647,2601.0156" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="364.8594" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="219.6016"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="753.8516" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="671.8594"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="160.7969" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="1991.3672"/></g><g><title>API Gateway</title><rect fill="#FFFFFF" height="175.9297" style="stroke:#000000;stroke-width:1;" width="10" x="292.8984" y="2239.5625"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="291.4609" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="248.7344"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="232.1953" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="773.3906"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="144.6641" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="1599.5078"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="102.5313" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="2020.5"/></g><g><title>Auth Service</title><rect fill="#FFFFFF" height="117.6641" style="stroke:#000000;stroke-width:1;" width="10" x="603.3071" y="2268.6953"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="244.0625" style="stroke:#000000;stroke-width:1;" width="10" x="805.1899" y="1137.3828"/></g><g><title>Main Service</title><rect fill="#FFFFFF" height="390.8594" style="stroke:#000000;stroke-width:1;" width="10" x="805.1899" y="1513.1094"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="277.8672"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="408.5313"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="466.7969"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="874.9219"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="1670.7734"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="2049.6328"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1009.6118" y="2312.9609"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1106.3647" y="1308.0469"/></g><g><title>PostgreSQL</title><rect fill="#FFFFFF" height="29.1328" style="stroke:#000000;stroke-width:1;" width="10" x="1106.3647" y="1830.5703"/></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1154.7412" x="5" y="160.7695"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="160.7695" y2="160.7695"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="163.7695" y2="163.7695"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="96.8052" x="533.968" y="150.2031"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="78.2793" x="539.968" y="166.27">User Login</text><g class="message" data-participant-1="User" data-participant-2="Gateway"><polygon fill="#000000" points="280.8984,215.6016,290.8984,219.6016,280.8984,223.6016,284.8984,219.6016" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="28.9551" x2="286.8984" y1="219.6016" y2="219.6016"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="132.5771" x="35.9551" y="199.4028">POST /api/auth/login</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.605" x="35.9551" y="214.5356">{email, password}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#000000" points="591.3071,244.7344,601.3071,248.7344,591.3071,252.7344,595.3071,248.7344" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="597.3071" y1="248.7344" y2="248.7344"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="149.9253" x="309.8984" y="243.6685">Forward Login Request</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,273.8672,1007.6118,277.8672,997.6118,281.8672,1001.6118,277.8672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="277.8672" y2="277.8672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.498" x="620.3071" y="272.8013">Validate Credentials</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,303,614.3071,307,624.3071,311,620.3071,307" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="307" y2="307"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="73.9248" x="630.3071" y="301.9341">User Found</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="655.3071" y1="351.2656" y2="351.2656"/><line style="stroke:#000000;stroke-width:2;" x1="655.3071" x2="655.3071" y1="351.2656" y2="364.2656"/><line style="stroke:#000000;stroke-width:2;" x1="614.3071" x2="655.3071" y1="364.2656" y2="364.2656"/><polygon fill="#000000" points="624.3071,360.2656,614.3071,364.2656,624.3071,368.2656,620.3071,364.2656" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.269" x="620.3071" y="331.0669">Generate JWT Token</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="108.7798" x="620.3071" y="346.1997">+ Refresh Token</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,404.5313,1007.6118,408.5313,997.6118,412.5313,1001.6118,408.5313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="408.5313" y2="408.5313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.438" x="620.3071" y="388.3325">Store Token</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="158.4756" x="620.3071" y="403.4653">(for revocation tracking)</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,433.6641,614.3071,437.6641,624.3071,441.6641,620.3071,437.6641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="437.6641" y2="437.6641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="86.6899" x="630.3071" y="432.5981">Token Stored</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,462.7969,1007.6118,466.7969,997.6118,470.7969,1001.6118,466.7969" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="466.7969" y2="466.7969"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="117.7236" x="620.3071" y="461.731">Update Last Login</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,491.9297,614.3071,495.9297,624.3071,499.9297,620.3071,495.9297" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="495.9297" y2="495.9297"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="55.3325" x="630.3071" y="490.8638">Updated</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#000000" points="313.8984,536.1953,303.8984,540.1953,313.8984,544.1953,309.8984,540.1953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="307.8984" x2="607.3071" y1="540.1953" y2="540.1953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.4883" x="319.8984" y="519.9966">AuthResponse</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="230.8262" x="319.8984" y="535.1294">{accessToken, refreshToken, user}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="User"><polygon fill="#000000" points="39.9551,580.4609,29.9551,584.4609,39.9551,588.4609,35.9551,584.4609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="33.9551" x2="296.8984" y1="584.4609" y2="584.4609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="45.9551" y="564.2622">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="96.751" x="45.9551" y="579.395">{tokens, user}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1154.7412" x="5" y="613.0273"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="613.0273" y2="613.0273"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="616.0273" y2="616.0273"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="187.5513" x="488.595" y="602.4609"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="169.0254" x="494.595" y="618.5278">Authenticated Request</text><g class="message" data-participant-1="User" data-participant-2="Gateway"><polygon fill="#000000" points="280.8984,667.8594,290.8984,671.8594,280.8984,675.8594,284.8984,671.8594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="28.9551" x2="286.8984" y1="671.8594" y2="671.8594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="114.1436" x="35.9551" y="651.6606">GET /api/v1/posts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="35.9551" y="666.7935">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Gateway"><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="344.8984" y1="716.125" y2="716.125"/><line style="stroke:#000000;stroke-width:2;" x1="344.8984" x2="344.8984" y1="716.125" y2="729.125"/><line style="stroke:#000000;stroke-width:2;" x1="303.8984" x2="344.8984" y1="729.125" y2="729.125"/><polygon fill="#000000" points="313.8984,725.125,303.8984,729.125,313.8984,733.125,309.8984,729.125" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.5718" x="309.8984" y="695.9263">AuthenticationFilter</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="90.3525" x="309.8984" y="711.0591">Extract Token</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#000000" points="591.3071,769.3906,601.3071,773.3906,591.3071,777.3906,595.3071,773.3906" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="597.3071" y1="773.3906" y2="773.3906"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="203.5947" x="309.8984" y="753.1919">POST /api/auth/validate-header</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="309.8984" y="768.3247">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="655.3071" y1="832.7891" y2="832.7891"/><line style="stroke:#000000;stroke-width:2;" x1="655.3071" x2="655.3071" y1="832.7891" y2="845.7891"/><line style="stroke:#000000;stroke-width:2;" x1="614.3071" x2="655.3071" y1="845.7891" y2="845.7891"/><polygon fill="#000000" points="624.3071,841.7891,614.3071,845.7891,624.3071,849.7891,620.3071,845.7891" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.5688" x="620.3071" y="797.4575">Validate Token:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="118.7139" x="620.3071" y="812.5903">- Check expiration</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="112.5947" x="620.3071" y="827.7231">- Verify signature</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,870.9219,1007.6118,874.9219,997.6118,878.9219,1001.6118,874.9219" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="874.9219" y2="874.9219"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="150.1602" x="620.3071" y="869.856">Check if token revoked</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,900.0547,614.3071,904.0547,624.3071,908.0547,620.3071,904.0547" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="904.0547" y2="904.0547"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="83.3638" x="630.3071" y="898.9888">Not Revoked</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="655.3071" y1="948.3203" y2="948.3203"/><line style="stroke:#000000;stroke-width:2;" x1="655.3071" x2="655.3071" y1="948.3203" y2="961.3203"/><line style="stroke:#000000;stroke-width:2;" x1="614.3071" x2="655.3071" y1="961.3203" y2="961.3203"/><polygon fill="#000000" points="624.3071,957.3203,614.3071,961.3203,624.3071,965.3203,620.3071,961.3203" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="126.4897" x="620.3071" y="928.1216">Extract user details</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="105.2061" x="620.3071" y="943.2544">from JWT claims</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#000000" points="313.8984,1001.5859,303.8984,1005.5859,313.8984,1009.5859,309.8984,1005.5859" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="307.8984" x2="607.3071" y1="1005.5859" y2="1005.5859"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.8828" x="319.8984" y="985.3872">TokenValidationResponse</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="215.6362" x="319.8984" y="1000.52">{valid: true, userId, email, roles}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Gateway"><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="344.8984" y1="1080.1172" y2="1080.1172"/><line style="stroke:#000000;stroke-width:2;" x1="344.8984" x2="344.8984" y1="1080.1172" y2="1093.1172"/><line style="stroke:#000000;stroke-width:2;" x1="303.8984" x2="344.8984" y1="1093.1172" y2="1093.1172"/><polygon fill="#000000" points="313.8984,1089.1172,303.8984,1093.1172,313.8984,1097.1172,309.8984,1093.1172" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="88.0166" x="309.8984" y="1029.6528">Add Headers:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="68.8276" x="309.8984" y="1044.7856">- X-User-Id</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.8091" x="309.8984" y="1059.9185">- X-User-Email</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="92.1108" x="309.8984" y="1075.0513">- X-User-Roles</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Main"><polygon fill="#000000" points="793.1899,1133.3828,803.1899,1137.3828,793.1899,1141.3828,797.1899,1137.3828" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="799.1899" y1="1137.3828" y2="1137.3828"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.4937" x="309.8984" y="1117.1841">Forward Request</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="174.8716" x="309.8984" y="1132.3169">with User Context Headers</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="857.1899" y1="1181.6484" y2="1181.6484"/><line style="stroke:#000000;stroke-width:2;" x1="857.1899" x2="857.1899" y1="1181.6484" y2="1194.6484"/><line style="stroke:#000000;stroke-width:2;" x1="816.1899" x2="857.1899" y1="1194.6484" y2="1194.6484"/><polygon fill="#000000" points="826.1899,1190.6484,816.1899,1194.6484,826.1899,1198.6484,822.1899,1194.6484" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.1353" x="822.1899" y="1161.4497">JwtAuthenticationFilter</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="170.4219" x="822.1899" y="1176.5825">Extract user from headers</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="857.1899" y1="1223.7813" y2="1223.7813"/><line style="stroke:#000000;stroke-width:2;" x1="857.1899" x2="857.1899" y1="1223.7813" y2="1236.7813"/><line style="stroke:#000000;stroke-width:2;" x1="816.1899" x2="857.1899" y1="1236.7813" y2="1236.7813"/><polygon fill="#000000" points="826.1899,1232.7813,816.1899,1236.7813,826.1899,1240.7813,822.1899,1236.7813" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.019" x="822.1899" y="1218.7153">Set SecurityContext</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="857.1899" y1="1265.9141" y2="1265.9141"/><line style="stroke:#000000;stroke-width:2;" x1="857.1899" x2="857.1899" y1="1265.9141" y2="1278.9141"/><line style="stroke:#000000;stroke-width:2;" x1="816.1899" x2="857.1899" y1="1278.9141" y2="1278.9141"/><polygon fill="#000000" points="826.1899,1274.9141,816.1899,1278.9141,826.1899,1282.9141,822.1899,1278.9141" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="159.0913" x="822.1899" y="1260.8481">Execute Controller Logic</text></g><g class="message" data-participant-1="Main" data-participant-2="MainDB"><polygon fill="#000000" points="1094.3647,1304.0469,1104.3647,1308.0469,1094.3647,1312.0469,1098.3647,1308.0469" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="1100.3647" y1="1308.0469" y2="1308.0469"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="78.0762" x="822.1899" y="1302.981">Query Posts</text></g><g class="message" data-participant-1="MainDB" data-participant-2="Main"><polygon fill="#000000" points="826.1899,1333.1797,816.1899,1337.1797,826.1899,1341.1797,822.1899,1337.1797" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="820.1899" x2="1110.3647" y1="1337.1797" y2="1337.1797"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="69.6084" x="832.1899" y="1332.1138">Posts Data</text></g><g class="message" data-participant-1="Main" data-participant-2="Gateway"><polygon fill="#000000" points="313.8984,1377.4453,303.8984,1381.4453,313.8984,1385.4453,309.8984,1381.4453" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="307.8984" x2="809.1899" y1="1381.4453" y2="1381.4453"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="319.8984" y="1361.2466">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.3906" x="319.8984" y="1376.3794">{posts}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="User"><polygon fill="#000000" points="39.9551,1421.7109,29.9551,1425.7109,39.9551,1429.7109,35.9551,1425.7109" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="33.9551" x2="296.8984" y1="1425.7109" y2="1425.7109"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="45.9551" y="1405.5122">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.3906" x="45.9551" y="1420.645">{posts}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1154.7412" x="5" y="1454.2773"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="1454.2773" y2="1454.2773"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="1457.2773" y2="1457.2773"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="385.0459" x="389.8477" y="1443.7109"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="366.52" x="395.8477" y="1459.7778">Token Validation (Alternative: Direct Service Call)</text><g class="message" data-participant-1="User" data-participant-2="Main"><polygon fill="#000000" points="793.1899,1509.1094,803.1899,1513.1094,793.1899,1517.1094,797.1899,1513.1094" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="28.9551" x2="799.1899" y1="1513.1094" y2="1513.1094"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.6436" x="35.9551" y="1492.9106">GET /api/v1/profile</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="35.9551" y="1508.0435">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="857.1899" y1="1542.2422" y2="1542.2422"/><line style="stroke:#000000;stroke-width:2;" x1="857.1899" x2="857.1899" y1="1542.2422" y2="1555.2422"/><line style="stroke:#000000;stroke-width:2;" x1="816.1899" x2="857.1899" y1="1555.2422" y2="1555.2422"/><polygon fill="#000000" points="826.1899,1551.2422,816.1899,1555.2422,826.1899,1559.2422,822.1899,1555.2422" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="148.1353" x="822.1899" y="1537.1763">JwtAuthenticationFilter</text></g><g class="message" data-participant-1="Main" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,1595.5078,614.3071,1599.5078,624.3071,1603.5078,620.3071,1599.5078" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="618.3071" x2="804.1899" y1="1599.5078" y2="1599.5078"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.189" x="630.3071" y="1579.3091">Validate Token</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="110.8936" x="630.3071" y="1594.4419">(via Feign Client)</text></g><g class="message" data-participant-1="Auth" data-participant-2="Auth"><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="655.3071" y1="1628.6406" y2="1628.6406"/><line style="stroke:#000000;stroke-width:2;" x1="655.3071" x2="655.3071" y1="1628.6406" y2="1641.6406"/><line style="stroke:#000000;stroke-width:2;" x1="614.3071" x2="655.3071" y1="1641.6406" y2="1641.6406"/><polygon fill="#000000" points="624.3071,1637.6406,614.3071,1641.6406,624.3071,1645.6406,620.3071,1641.6406" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="97.189" x="620.3071" y="1623.5747">Validate Token</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,1666.7734,1007.6118,1670.7734,997.6118,1674.7734,1001.6118,1670.7734" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="1670.7734" y2="1670.7734"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="116.8159" x="620.3071" y="1665.7075">Check Revocation</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,1695.9063,614.3071,1699.9063,624.3071,1703.9063,620.3071,1699.9063" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="1699.9063" y2="1699.9063"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="32.335" x="630.3071" y="1694.8403">Valid</text></g><g class="message" data-participant-1="Auth" data-participant-2="Main"><polygon fill="#000000" points="793.1899,1740.1719,803.1899,1744.1719,793.1899,1748.1719,797.1899,1744.1719" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="608.3071" x2="799.1899" y1="1744.1719" y2="1744.1719"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.8828" x="615.3071" y="1723.9731">TokenValidationResponse</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.9307" x="615.3071" y="1739.106">{valid: true, user details}</text></g><g class="message" data-participant-1="Main" data-participant-2="Main"><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="857.1899" y1="1788.4375" y2="1788.4375"/><line style="stroke:#000000;stroke-width:2;" x1="857.1899" x2="857.1899" y1="1788.4375" y2="1801.4375"/><line style="stroke:#000000;stroke-width:2;" x1="816.1899" x2="857.1899" y1="1801.4375" y2="1801.4375"/><polygon fill="#000000" points="826.1899,1797.4375,816.1899,1801.4375,826.1899,1805.4375,822.1899,1801.4375" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="130.019" x="822.1899" y="1768.2388">Set SecurityContext</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="107.5103" x="822.1899" y="1783.3716">with user details</text></g><g class="message" data-participant-1="Main" data-participant-2="MainDB"><polygon fill="#000000" points="1094.3647,1826.5703,1104.3647,1830.5703,1094.3647,1834.5703,1098.3647,1830.5703" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="815.1899" x2="1100.3647" y1="1830.5703" y2="1830.5703"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="84.5762" x="822.1899" y="1825.5044">Query Profile</text></g><g class="message" data-participant-1="MainDB" data-participant-2="Main"><polygon fill="#000000" points="826.1899,1855.7031,816.1899,1859.7031,826.1899,1863.7031,822.1899,1859.7031" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="820.1899" x2="1110.3647" y1="1859.7031" y2="1859.7031"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="76.1084" x="832.1899" y="1854.6372">Profile Data</text></g><g class="message" data-participant-1="Main" data-participant-2="User"><polygon fill="#000000" points="39.9551,1899.9688,29.9551,1903.9688,39.9551,1907.9688,35.9551,1903.9688" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="33.9551" x2="809.1899" y1="1903.9688" y2="1903.9688"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="45.9551" y="1883.77">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="57.8906" x="45.9551" y="1898.9028">{profile}</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1154.7412" x="5" y="1932.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="1932.5352" y2="1932.5352"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="1935.5352" y2="1935.5352"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="185.0947" x="489.8232" y="1921.9688"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="166.5688" x="495.8232" y="1938.0356">Logout (Single Device)</text><g class="message" data-participant-1="User" data-participant-2="Gateway"><polygon fill="#000000" points="280.8984,1987.3672,290.8984,1991.3672,280.8984,1995.3672,284.8984,1991.3672" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="28.9551" x2="286.8984" y1="1991.3672" y2="1991.3672"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="142.0161" x="35.9551" y="1971.1685">POST /api/auth/logout</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="35.9551" y="1986.3013">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#000000" points="591.3071,2016.5,601.3071,2020.5,591.3071,2024.5,595.3071,2020.5" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="597.3071" y1="2020.5" y2="2020.5"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="101.8418" x="309.8984" y="2015.4341">Forward Logout</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,2045.6328,1007.6118,2049.6328,997.6118,2053.6328,1001.6118,2049.6328" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="2049.6328" y2="2049.6328"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="155.3081" x="620.3071" y="2044.5669">Mark Token as Revoked</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,2074.7656,614.3071,2078.7656,624.3071,2082.7656,620.3071,2078.7656" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="2078.7656" y2="2078.7656"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="100.2485" x="630.3071" y="2073.6997">Token Revoked</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#000000" points="313.8984,2119.0313,303.8984,2123.0313,313.8984,2127.0313,309.8984,2123.0313" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="307.8984" x2="607.3071" y1="2123.0313" y2="2123.0313"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="319.8984" y="2102.8325">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.8096" x="319.8984" y="2117.9653">{message: "Logged out"}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="User"><polygon fill="#000000" points="39.9551,2148.1641,29.9551,2152.1641,39.9551,2156.1641,35.9551,2152.1641" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="33.9551" x2="296.8984" y1="2152.1641" y2="2152.1641"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="45.9551" y="2147.0981">200 OK</text></g><rect fill="#FFFFFF" height="3" style="stroke:#FFFFFF;stroke-width:1;" width="1154.7412" x="5" y="2180.7305"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="2180.7305" y2="2180.7305"/><line style="stroke:#000000;stroke-width:0.5;" x1="5" x2="1159.7412" y1="2183.7305" y2="2183.7305"/><rect fill="#FFFFFF" height="23.1328" style="stroke:#000000;stroke-width:1;" width="166.1533" x="499.2939" y="2170.1641"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="147.6274" x="505.2939" y="2186.231">Logout (All Devices)</text><g class="message" data-participant-1="User" data-participant-2="Gateway"><polygon fill="#000000" points="280.8984,2235.5625,290.8984,2239.5625,280.8984,2243.5625,284.8984,2239.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="28.9551" x2="286.8984" y1="2239.5625" y2="2239.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="244.9434" x="35.9551" y="2219.3638">POST /api/auth/logout-all?userId=123</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="201.8872" x="35.9551" y="2234.4966">Authorization: Bearer &lt;token&gt;</text></g><g class="message" data-participant-1="Gateway" data-participant-2="Auth"><polygon fill="#000000" points="591.3071,2264.6953,601.3071,2268.6953,591.3071,2272.6953,595.3071,2268.6953" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="302.8984" x2="597.3071" y1="2268.6953" y2="2268.6953"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.0908" x="309.8984" y="2263.6294">Forward Logout All</text></g><g class="message" data-participant-1="Auth" data-participant-2="AuthDB"><polygon fill="#000000" points="997.6118,2308.9609,1007.6118,2312.9609,997.6118,2316.9609,1001.6118,2312.9609" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;" x1="613.3071" x2="1003.6118" y1="2312.9609" y2="2312.9609"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="119.0186" x="620.3071" y="2292.7622">Revoke All Tokens</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="62.4482" x="620.3071" y="2307.895">for userId</text></g><g class="message" data-participant-1="AuthDB" data-participant-2="Auth"><polygon fill="#000000" points="624.3071,2338.0938,614.3071,2342.0938,624.3071,2346.0938,620.3071,2342.0938" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="618.3071" x2="1013.6118" y1="2342.0938" y2="2342.0938"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="127.2705" x="630.3071" y="2337.0278">All Tokens Revoked</text></g><g class="message" data-participant-1="Auth" data-participant-2="Gateway"><polygon fill="#000000" points="313.8984,2382.3594,303.8984,2386.3594,313.8984,2390.3594,309.8984,2386.3594" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="307.8984" x2="607.3071" y1="2386.3594" y2="2386.3594"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="319.8984" y="2366.1606">200 OK</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="276.4087" x="319.8984" y="2381.2935">{message: "Logged out from all devices"}</text></g><g class="message" data-participant-1="Gateway" data-participant-2="User"><polygon fill="#000000" points="39.9551,2411.4922,29.9551,2415.4922,39.9551,2419.4922,35.9551,2415.4922" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:2;stroke-dasharray:2,2;" x1="33.9551" x2="296.8984" y1="2415.4922" y2="2415.4922"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="47.7026" x="45.9551" y="2410.4263">200 OK</text></g><path d="M239,2428.4922 L239,2543.4922 L667,2543.4922 L667,2438.4922 L657,2428.4922 L239,2428.4922" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M657,2428.4922 L657,2438.4922 L667,2438.4922 L657,2428.4922" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183.4917" x="317.7917" y="2445.5591">Authentication Features:</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="173.2783" x="317.7917" y="2460.6919">- JWT-based stateless auth</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="178.9404" x="317.7917" y="2475.8247">- Token revocation tracking</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="187.2749" x="317.7917" y="2490.9575">- Multi-device logout support</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="261.5488" x="317.7917" y="2506.0903">- Feign Client for service-to-service auth</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="190.0044" x="317.7917" y="2521.2231">- Gateway-level auth filtering</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="189.6553" x="317.7917" y="2536.356">- Service-level security filters</text><!--SRC=[hLVVJoCt47xVls8AKWMK5Hptq5DKhe90A5Se7E7k-f0Nt-uaiRAnKzkRG17_UyTZRpO_8QW7GiBsV3FZcMzcl3-vFWuHHeMGAadiGAgHC688JmdGptUH3Nf6boflwa8Rs6wT-ry-itsHwubKFUYAmcBOmtzAL1cU6ACdztsP3HHQ2qV9Sv8uwGg4av8CAYSpuQHMy3DlQ2F_3UjMeIT98Z97nhvOD0bvGy9o99I3hPFRIxWG3YVYiQCQ7mu_76w1iDKMRDyOeNguW27zq4OpbXa6qAyCultj2uEevW7N58bvm7i6yFxsbUprtMbHOf8B9xuBYx1rgwth6Mn_lkge7TPxThexDN9s2jlV-YZSEWGhhX1-KIEIusCE0rpf7WaT7oS9BzEFqqituFQcVGy7OYGF19axABneHptXKCXY7qR2seas-REFgXmJge8cbGhInbuteANDH9WychlpsRIk1dgfX4KZX3njm5THoDmVDmtcFhT4XtdCsMaIfTFQ5b-avRcLvBWeFcU5X2zGeV7ddxxTmxqU8Dtm5tAmQz3smyQoOsrY4LRIErsYbC6nZinpXhXDxDtTm5LM4TIjSdR9y9SHn-DAM1T2kKau6FD2BEPoxhVkq8wqiaJI9v5bL6VivZvTagCILoM5-NbHQvrwqig9QC3HuI7S_4dAd0VQ5SYADvwLCtMCUSMKDGIzE8_y7Byx617pRKVDLNq3Jb4OGlt6fZykCtMMglD1g7j9InOEJKUTF_ZKkaYAPOulbCiuiZUbWiizVaFNE8oBD9sM0XjlT5GApJvc0y27aJIiqUzzHIExZs1bJmbN6bncK439Bh1Pvks0oF4wZVxIZh8Hf5ylgofMFjMGewEEGSdf6ZtaGijeAWpjIWBo1UDrwLOpNEI0DgY-IWmSkipt8JOZemkqosnSazuyXpyuAPOZ-NVggPLUvZEBSwztPdtd3Spfu-vQTxR8r8wQIBeJSxMfbSC7LzcgW-oX2UDhFPycxcNQSIWvWlseRq536ntzPQMHxZ6QNXGvVw1ptr3fc49Mn06GpSanJpwNQ1x1ZvC5lodPKIYjzR8SdD4Ocat1ZFX2agSjWQlsUH6KlDX6bZ6p_IEqr9f0i7FYuqZr8CVOW3DfC7FL68QcA8hTkUuIRpJNMepkoW8thk1mXStoEnLRMUWqNSPIG0kfeA5PI4BllgbJh6i0TzDvjK7fiyeNvqUyunjgjseAAshsTLh78flLivR18NURS3X8hcDnJUCbFWRW2XOJ7QcyTEbWfqql0gySFUrsDtvm4VRDC-t5rnSfVEtPTItC89OHlHllDfuG0R9-HgnezjCO3kcL8NfKdrlaOuy6F_cvzORNnRfkK8N_f2XYxEsRWfzIV_Wzp9hZTqVlVtWkW1nxBHyXebuoXDWFKdfo1gyso4iD_8792PE8eaC5o67ztzbIcbPwJ69nQpze0TZRM_YuQo6_RcnZRu-EK_-aIFttJmxM4RRmduOYODD8onKFT3wzBWidqt0723a7Muv6sZW-dsszuCDkm-H8dKxZlxMfw7XQu1WBteOkT_dAMXmxKS36hXQ5R88g1n-6v3y0]--></g></svg>